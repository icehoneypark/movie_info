{% extends 'base.html' %}
{% block content %}

<h1>{{ person.username }}</h1>
<span>게시글 : {{ person.post_set.all|length }}</span>
&nbsp&nbsp&nbsp
<span>followers : {{ person.followers.all|length }}</span>
&nbsp&nbsp&nbsp
<span>followings : {{ person.followings.all|length }}</span>
<br>
<span>e-mail : {{ person.email }}</span>
<br>
{% if person.profile_img %}
  <span>profile image : <img src="{{ person.profile_img.url }}" alt="profile_img" style="width: 50px; height: 50px;"></span>
{% endif %}
<br>
<br>
{% if request.user.is_authenticated and request.user != person %}
  <form action="{% url 'accounts:follow' person.username %}" method="POST">
    {% csrf_token %}
    {% if request.user in person.followers.all %}
      <button>Unfollow</button>
    {% else %}
      <button>Follow</button>
    {% endif %}
  </form>
{% endif %}
<h3>{{ person.username }}가 작성한 글</h3>
{% for post in person.post_set.all %}
<p><a href="{% url 'community:community_detail' post.pk %}">{{ post.title }}</a></p>
{% endfor %}
{% if request.user == person %}
<a href="{% url 'accounts:change' %}">회원정보수정</a>
<form action="{% url 'accounts:delete' %}" method=POST>
{% csrf_token %}
<input type="submit" value="회원탈퇴">
</form>
</a>
{% endif %}
{% endblock %}
